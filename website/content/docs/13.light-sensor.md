---
title: "Capteur de Lumière TEMT6000"
description: "Guide d'intégration du capteur de lumière TEMT6000 dans le module Lost"
---

# Capteur de Lumière TEMT6000

Le **TEMT6000** est un capteur de lumière ambiante analogique utilisé dans l'ESP Nightmare pour détecter un changement d'éclairage et déclencher le changement de vidéo.

## Branchement

| TEMT6000 | ESP32 (Nightmare) |
|----------|-------------------|
| VCC      | 3.3V              |
| GND      | GND               |
| OUT      | GPIO 34           |

> **Note**: Le GPIO 34 est uniquement en entrée et supporte l'ADC, idéal pour les capteurs analogiques.

## Fonctionnement

1. Le capteur mesure l'intensité lumineuse ambiante
2. La valeur ADC (0-4095) est lue toutes les 200ms
3. Si la valeur dépasse le **threshold** (défaut: 1000), le trigger est activé
4. Le système envoie `lost_light_is_triggered: true` via WebSocket
5. La vidéo passe de `video1.mp4` à `video2.mp4`

## Architecture Code

```
Framework/Light/
├── LightDelegate.py    # Interface de callback
└── LightSensor.py      # Driver TEMT6000

Core/Lost/
├── LostLightDelegate.py # Bridge vers Workshop
├── LostHardware.py      # Init sensor (nightmare)
├── LostWorkshop.py      # on_light_event()
└── State/LostStateLight.py # handle_light()
```

## Calibration du Threshold

Le `threshold` par défaut est **1000**. Pour ajuster :

```python
# Dans LostHardware.py, ligne d'init du sensor
self.light_sensor = LightSensor(pin=34, delegate=self.light_delegate, 
                                threshold=1500,  # <-- Modifier ici
                                name="TEMT6000")
```

- **Valeur basse (500-800)**: Très sensible, réagit aux lumières faibles
- **Valeur haute (1500-2500)**: Moins sensible, nécessite une lumière forte
