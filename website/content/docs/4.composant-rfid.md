---
title: "Composant RFID (RC522)"
description: "Câblage et utilisation des lecteurs RFID MFRC522."
category: "Composants"
tags: ["Hardware", "RFID", "Component"]
---

# Lecteur RFID (RC522)

Le module **RC522** est utilisé pour la lecture de tags RFID (13.56 MHz). Dans le cadre du projet, nous utilisons souvent plusieurs lecteurs connectés sur un même bus.

![Module RFID](/components/rfid/rfid.jpg)

## Câblage SPI (Bus Partagé)

Pour connecter plusieurs lecteurs "en série" (sur le même bus de données), il faut partager les lignes **SCK**, **MOSI**, et **MISO**, mais attribuer des broches **SDA (CS)** et **RST** uniques pour chaque lecteur.

> [!WARNING]
> Alimentez le module en **3.3V**. Le 5V peut endommager le module ou l'ESP32.

### Broches Communes (Bus SPI)
| Pin RC522 | ESP32 GPIO | Fonction |
| :--- | :--- | :--- |
| **SDA (SS)** | *Variable* | Chip Select (Unique par lecteur) |
| **SCK** | **18** | Serial Clock |
| **MOSI** | **23** | Master Out Slave In |
| **MISO** | **19** | Master In Slave Out |
| **IRQ** | *Non connecté* | Interrupt Request |
| **GND** | **GND** | Masse |
| **RST** | *Variable* | Reset (Unique par lecteur) |
| **3.3V** | **3.3V** | Alimentation |

### Configuration Multi-Lecteurs

Exemple de configuration pour 4 lecteurs (comme dans `RfidFactory`):

| Lecteur | Pin SDA (CS) | Pin RST |
| :--- | :--- | :--- |
| **Lecteur 1** | GPIO 2 | GPIO 0 |
| **Lecteur 2** | GPIO 16 | GPIO 4 |
| **Lecteur 3** | GPIO 17 | GPIO 21 |
| **Lecteur 4** | GPIO 5 | GPIO 22 |

## Utilisation Code

Utilisez la classe `RfidFactory` pour instancier vos lecteurs facilement.

```python
from src.Framework.Rfid.RfidFactory import RFIDFactory
from machine import SPI, Pin

# Initialisation du bus SPI partagé
spi = SPI(2, baudrate=2500000, polarity=0, phase=0, sck=Pin(18), mosi=Pin(23), miso=Pin(19))

# Création d'un lecteur
reader = RFIDFactory.create_reader(spi, cs_pin=5, rst_pin=22, delegate=MyDelegate(), name="Reader1")
```
