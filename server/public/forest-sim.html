<!doctype html>
<meta charset="utf-8" />
<title>Forest workshop test</title>
<style>
  body {
    font-family: system-ui, sans-serif;
    padding: 1.5rem;
  }

  button {
    padding: 0.5rem 1rem;
    font-size: 1rem;
  }

  pre {
    background: #f5f5f5;
    padding: 0.75rem;
    margin-top: 1rem;
    max-height: 300px;
    overflow: auto;
  }
</style>

<h1>Forest workshop â€“ test</h1>
<button id="start">Start forest</button>
<pre id="log"></pre>

<script>
  const logEl = document.getElementById("log");
  const log = (m) => (logEl.textContent += m + "\n");

  const ws = new WebSocket("ws://localhost:3000/ws");

  ws.onopen = () => log("WS open");
  ws.onclose = () => log("WS closed");
  ws.onerror = (e) => log("WS error");
  ws.onmessage = (e) => log("<< " + e.data);

  document.getElementById("start").onclick = () => {
    const msg = { type: "workshop", value: { name: "forest", action: "start" } };
    ws.send(JSON.stringify(msg));
    log(">> " + JSON.stringify(msg));
  };
</script>